
> chamasmart-backend@1.0.0 test
> jest --runInBand tests/requestLogger.test.js --no-coverage

  console.log
    [dotenv@17.2.3] injecting env (3) from .env -- tip: ΓÜÖ∩╕Å  write to custom object with { processEnv: myObject }

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    [MOCK] Loading mocked database

      at Object.log (config/__mocks__/db.js:2:9)

FAIL tests/requestLogger.test.js
  Request Logger Middleware
    sanitizeBody
      ΓêÜ should redact password field (7 ms)
      ΓêÜ should redact multiple sensitive fields (1 ms)
      ΓêÜ should handle null/undefined body (2 ms)
    sanitizeHeaders
      ├ù should partially redact authorization header (3 ms)
      ΓêÜ should redact cookie header (1 ms)

  ΓùÅ Request Logger Middleware ΓÇ║ sanitizeHeaders ΓÇ║ should partially redact authorization header

    expect(received).toContain(expected) // indexOf

    Expected substring: "Bearer eyJhbGciOi..."
    Received string:    "[REDACTED]"

      49 |             const sanitized = sanitizeHeaders(headers);
      50 |
    > 51 |             expect(sanitized.authorization).toContain('Bearer eyJhbGciOi...');
         |                                             ^
      52 |             expect(sanitized['content-type']).toBe('application/json');
      53 |         });
      54 |

      at Object.toContain (tests/requestLogger.test.js:51:45)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 4 passed, 5 total
Snapshots:   0 total
Time:        4.325 s
Ran all test suites matching tests/requestLogger.test.js.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
